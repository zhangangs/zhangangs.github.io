<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="apple-mobile-web-app-title" content="飞鱼"><meta name="apple-mobile-web-app-capable" content="yes"><meta naem="apple-mobile-web-app-status-bar-style" content="#f0f0f0"><meta name="keywords" content="飞鱼,前端,技术博客,心情日记"><meta name="description" content="随手记录工作生活中的点点滴滴,让普通的生活中多一点小小的惊喜..."><title>npm publish 报错 “code EPUBLISHCONFLICT”-飞鱼</title><link rel="apple-touch-icon" href="/images/android-chrome-192x192.png"><link rel="stylesheet" href="/css/normalize.css"><link rel="manifest" href="manifest.json"><link rel="stylesheet" href="/css/hexo-theme-adoubi.css"><link rel="icon" href="/images/favicon.ico"></head><body><div class="content"><div class="author-info post-header"><a href="/archives/" title="返回列表页"><img src="/images/icon_face.jpg"></a><a class="jump" href="/archives/" title="返回列表页"> <img src="/images/icon-back.svg"><span>返回</span></a></div><h4 class="post-title-wrapper"><p class="post-title">npm publish 报错 “code EPUBLISHCONFLICT”</p></h4><div class="post-date"><p>Author:<a href="/about">飞鱼</a></p><p>Date:<time datetime="2018-10-21T16:00:00.000Z">2018-10-22</time></p></div><div class="post-content"><p>今天又遇到一个坑，<code>npm publish 报错 “code EPUBLISHCONFLICT”</code>，详情报错如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ npm publish</span><br><span class="line">npm ERR! code EPUBLISHCONFLICT</span><br><span class="line">npm ERR! publish fail Cannot publish over existing version.</span><br><span class="line">npm ERR! publish fail Update the <span class="string">'version'</span> field <span class="keyword">in</span> package.json and <span class="keyword">try</span> again.</span><br><span class="line">npm ERR! publish fail</span><br><span class="line">npm ERR! publish fail To automatically increment version numbers, <span class="attr">see</span>:</span><br><span class="line">npm ERR! publish fail     npm help version</span><br><span class="line"></span><br><span class="line">npm ERR! A complete log <span class="keyword">of</span> <span class="keyword">this</span> run can be found <span class="keyword">in</span>:</span><br><span class="line">npm ERR!     C:\Users\zhangang\AppData\Roaming\npm-cache\_logs\<span class="number">2018</span><span class="number">-10</span><span class="number">-22</span>T09_14_35_705Z-debug.log</span><br></pre></td></tr></table></figure>
<p>大概的意思是，代码冲突，需要更新发布版本号，再重新提交试试。</p>
<p>如果按照它的提示来弄，绝对的坑死人的节奏。<img src="https://tb2.bdstatic.com/tb/editor/images/tsj/t_0029.gif" alt=""></p>
<p><strong>我的<code>package.json</code> 如下所示：</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"wn-cli"</span>,</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="string">"description"</span>: <span class="string">"项目自动构建工具"</span>,</span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"bin"</span>: &#123;</span><br><span class="line">    <span class="string">"wn"</span>: <span class="string">"./bin/base.js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"repository"</span>: &#123;</span><br><span class="line">    <span class="string">"type"</span>: <span class="string">"git"</span>,</span><br><span class="line">    <span class="string">"url"</span>: <span class="string">"http://192.168.5.113/zhangang/wn-cli.git"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"author"</span>: <span class="string">"Veiss"</span>,</span><br><span class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="string">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"commander"</span>: <span class="string">"^2.19.0"</span>,</span><br><span class="line">    <span class="string">"shelljs"</span>: <span class="string">"^0.8.2"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>低调奢华的一段代码，跟代码冲突没有一毛钱的关系。<code>npm publish</code>怎么就失败了呢？</p>
<p><strong>最终问题出在<code>name</code>字段的”中划线”上面，去掉即可发布成功！</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"name"</span>: <span class="string">"wn-cli"</span>,<span class="string">`</span></span><br></pre></td></tr></table></figure>
<p>改成<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"name"</span>: <span class="string">"wncli"</span>,</span><br></pre></td></tr></table></figure></p>
<p>即可发布成功！</p>
</div></div><div class="footer"><div class="footer-copyright">Theme By <a href="https://github.com/shinux/hexo-theme-adoubi" target="_blank">Adoubi</a> , Modify By <a href="https://github.com/zhangangs" target="_blank">Veiss</a>, Powered By Hexo.</div></div></body></html>